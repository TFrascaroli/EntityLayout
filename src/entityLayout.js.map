{"version":3,"sources":["entityLayout.ts"],"names":[],"mappings":"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","file":"entityLayout.js","sourcesContent":["import {LayoutRow} from \"./layoutRow\";\r\nimport {IEntity} from \"./IEntity\";\r\nimport {LayoutColumn} from \"./layoutColumn\";\r\n\r\nexport class EntityLayout {\r\n\r\n    private availableEntities: Array<IEntity>;\r\n    private rows: Array<LayoutRow>;\r\n    private currentColumn: LayoutColumn;\r\n    private popup: HTMLDivElement;\r\n    private popupSelectArea: HTMLSelectElement;\r\n    private div: HTMLDivElement;\r\n\r\n    constructor() {\r\n        this.availableEntities = [];\r\n        this.rows = [];\r\n        this.currentColumn = null;\r\n        this.div = document.createElement(\"div\");\r\n        this.div.className = \"entity-layout\";\r\n        this.popup = document.createElement(\"div\");\r\n        this.popupSelectArea = document.createElement(\"select\");\r\n    }\r\n\r\n    openPopup(col: LayoutColumn) {\r\n        this.currentColumn = col;\r\n        this.popup.classList.remove(\"visible\");\r\n        this.popup.classList.add(\"EL-popup\");\r\n        let popupLayer = document.createElement(\"div\");\r\n        popupLayer.classList.add(\"layer\");\r\n        let popupContent = document.createElement(\"div\");\r\n        popupContent.classList.add(\"content\");\r\n        let popupWraper = document.createElement(\"div\");\r\n        popupWraper.classList.add(\"wraper\");\r\n        let popupSelectArea = document.createElement(\"select\");\r\n        this.popupSelectArea = popupSelectArea;\r\n\r\n        this.popup.appendChild(popupLayer);\r\n        this.popup.appendChild(popupWraper);\r\n        popupWraper.appendChild(popupContent);\r\n        popupContent.appendChild(popupSelectArea);\r\n        document.body.appendChild(this.popup);\r\n    }\r\n\r\n    addEntities(ents: Array<IEntity>) {\r\n        let self = this;\r\n\r\n        ents.forEach( ent =>{\r\n            this.availableEntities.push(ent);\r\n            let popupOption = document.createElement(\"option\");\r\n            popupOption.textContent = ent.id;\r\n            popupOption.addEventListener(\"click\", function () {\r\n                if (self.currentColumn !== null) {\r\n                    self.currentColumn.setEntity(ent);\r\n                }\r\n                self.popup.classList.remove(\"visible\");\r\n            });\r\n            this.popupSelectArea.appendChild(popupOption);\r\n        });\r\n        \r\n        this.availableEntities = ents;\r\n    }\r\n    addRow(){\r\n        let r = new LayoutRow(this);\r\n        this.rows.push(r);\r\n        this.div.appendChild(r.div);\r\n        return r;\r\n    }\r\n    clear() {\r\n        this.availableEntities = [];\r\n        this.rows = [];\r\n    }\r\n    render() {\r\n        let div_rows = document.createElement(\"div\");\r\n        div_rows.style.width = \"21cm\";\r\n        div_rows.style.padding = \"1cm\";\r\n        div_rows.style.backgroundColor = \"#bebebe\";\r\n        this.rows.forEach(r => {\r\n           div_rows.appendChild(r.render());\r\n        });\r\n        // Cambiar!!\r\n        return \"<html><head><style type=\\\"text/css\\\"><\\/style><\\/head><body>\" + div_rows.outerHTML + \"<\\/body><\\/html>\";\r\n\r\n    };\r\n}"]}