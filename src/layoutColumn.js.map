{"version":3,"sources":["layoutColumn.ts"],"names":[],"mappings":";;AAIA;IAQI,sBAAY,EAAgB;QACxB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAEjD,kBAAkB;QAClB,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC9C,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;QAC9B,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC;QACxB,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;QAClB,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;QAClB,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC;QACpB,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE;YAC/B,IAAI,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,EACpC,GAAG,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC;YACnC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC;YAClB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,OAAO,CAAC;QACpD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC9B,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,GAAG;YAC5C,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC;gBAAC,MAAM,CAAC;YACpC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QACH,wBAAwB;QACxB,IAAI,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACtD,iBAAiB,CAAC,SAAS,GAAG,sBAAsB,CAAC;QACrD,iBAAiB,CAAC,gBAAgB,CAAC,OAAO,EAAE;YACxC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC;YACrC,IAAI,OAAO,GAAG,OAAO,CAAC,sBAAsB,CAAC,QAAQ,CAAC,CAAC;YACvD,EAAE,CAAA,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;oBACvB,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;oBAC3B,EAAE,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC/B,CAAC;gBACA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;gBAClB,iBAAiB,CAAC,MAAM,EAAE,CAAC;YAC5B,CAAC;QAEL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC5C,CAAC;IAED,8BAAO,GAAP;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,gCAAS,GAAT;QACI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;IACpB,CAAC;IAED,mCAAY,GAAZ;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,EAAE,CAAC;QAClC,6BAA6B;IACjC,CAAC;IACD,gCAAS,GAAT,UAAU,GAAW;QACjB,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,gBAAgB,CAAC;QAC9C,EAAE,CAAA,CAAC,GAAG,CAAC,CAAA,CAAC;YACJ,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;YACf,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;YACjD,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC3C,CAAC;IACL,CAAC;IACD,6BAAM,GAAN;QACI,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC5C,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9C,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QAC/C,OAAO,CAAC,SAAS,GAAG,yBAAyB,CAAC;QAC9C,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAC/B,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;QACzC,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAI,KAAK,CAAC;QAC9D,MAAM,CAAC,OAAO,CAAC;IACnB,CAAC;IAAA,CAAC;IAEF,iCAAU,GAAV;QACI,qBAAqB;QACrB,IAAI,OAAO,GAAG;YACV,KAAK,EAAE,IAAI;YACX,GAAG,EAAE,IAAI,CAAC,GAAG;SAChB,CAAC;QACF,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YACX,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;QAChC,CAAC;QACD,MAAM,CAAC,OAAO,CAAC;IACnB,CAAC;IAED,6BAAM,GAAN,UAAO,GAAW;QACd,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,MAAM,CAAC;IACnD,CAAC;IAED,6BAAM,GAAN,UAAO,MAAqB;QACxB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC,UAAA,CAAC,IAAK,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,KAAK,CAAA,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxF,CAAC;IACL,mBAAC;AAAD,CA1GA,AA0GC,IAAA;AA1GY,oCAAY","file":"layoutColumn.js","sourcesContent":["import {EntityLayout} from \"./entityLayout\";\r\nimport {Entity} from \"./entity\";\r\nimport {ILayoutColumn} from \"./interfaces/ILayoutColumn\";\r\n\r\nexport class LayoutColumn {\r\n\r\n    public div: HTMLDivElement;\r\n    private ent: Entity;\r\n    private el: EntityLayout;\r\n    private dim: number;\r\n    private div_content: HTMLDivElement;\r\n\r\n    constructor(el: EntityLayout) {\r\n        let self = this;\r\n        this.div = document.createElement(\"div\");\r\n        this.div_content = document.createElement(\"div\");\r\n        \r\n        // Dimensions flex\r\n        let div_dim = document.createElement(\"input\");\r\n        div_dim.className = \"dim-col\";\r\n        div_dim.type = \"number\";\r\n        div_dim.max = \"5\";\r\n        div_dim.min = \"1\";\r\n        div_dim.value = \"1\";\r\n        div_dim.addEventListener(\"change\", function() {\r\n            let rawVal = parseInt(div_dim.value, 10),\r\n                val = (10 + rawVal).toString();\r\n            self.dim = rawVal;\r\n            self.div.style.flex = val + \" \" + val + \" auto\";\r\n        });\r\n        this.div.appendChild(div_dim); \r\n\r\n        this.div.className = \"column\";\r\n        this.el = el;\r\n        this.div.addEventListener(\"click\", function (evt) {\r\n            if (evt.target !== self.div) return;\r\n            self.el.openPopup(self);\r\n        });\r\n        // Button Delete Columns\r\n        let remove_column_btn = document.createElement(\"div\");\r\n        remove_column_btn.className = \"button-remove-column\";\r\n        remove_column_btn.addEventListener(\"click\", function(){\r\n            let row_div = self.div.parentElement;\r\n            let element = row_div.getElementsByClassName(\"column\");\r\n            if(element.length > 1) {\r\n                if (self.getEntity()) {\r\n                let ent = self.getEntity();\r\n                el.getEntities().push(ent);\r\n            }\r\n             self.div.remove();\r\n             remove_column_btn.remove();\r\n            }\r\n\r\n        });\r\n        this.div.appendChild(remove_column_btn);\r\n    }\r\n\r\n    destroy() {\r\n        this.div = null;\r\n    }\r\n\r\n    getEntity(){\r\n        return this.ent;\r\n    }\r\n\r\n    deleteEntity(){\r\n        this.ent = null;\r\n        this.div_content.textContent = \"\";\r\n        // this.div.textContent = \"\";\r\n    }\r\n    setEntity(ent: Entity){\r\n        this.div_content.className = \"content-column\";\r\n        if(ent){\r\n            this.ent = ent;\r\n            this.div_content.textContent = ent.id.toString();\r\n            this.div.appendChild(this.div_content);\r\n        }\r\n    }\r\n    render(): HTMLDivElement {\r\n        let div_rep = document.createElement(\"div\");\r\n        let div_inner = document.createElement(\"div\");\r\n        div_inner.classList.add(\"sledge-hammer-inner\");\r\n        div_rep.className = \"flexChild sledge-hammer\";\r\n        div_rep.appendChild(div_inner);\r\n        div_inner.appendChild(this.ent.render());\r\n        div_rep.style.flex = this.dim + \" \" + this.dim + \" \" +  \"0px\";\r\n        return div_rep;\r\n    };\r\n\r\n    serializer(): ILayoutColumn {\r\n        // Falta el render!!!\r\n        let colprop = {\r\n            entID: null,\r\n            dim: this.dim\r\n        };\r\n        if (this.ent) {\r\n            colprop.entID = this.ent.id;\r\n        }\r\n        return colprop;\r\n    }\r\n\r\n    setDim(dim: number) {\r\n        this.dim = dim;\r\n        this.div.style.flex = dim + \" \" + dim + \"auto\";\r\n    }\r\n\r\n    parser(object: ILayoutColumn) {\r\n        this.setDim(object.dim);\r\n        this.setEntity(this.el.get_entity().filter(e => {return e.id === object.entID})[0]);\r\n    }\r\n}"]}