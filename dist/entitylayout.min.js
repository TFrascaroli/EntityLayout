!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).entitylayout=t()}}(function(){return function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return o(i||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./layoutrow"),o=function(){function t(t){var e=this;this.availableEntities=[],this.copyAvailableEntities=[],this.rows=[],this.currentColumn=null,this.numberColumns=t,this.div=document.createElement("div"),this.div.className="entity-layout",this.div_container=document.createElement("div"),this.div_container.className="content-rows",this.div.appendChild(this.div_container);var i=document.createElement("div");i.className="button-add-row",i.addEventListener("click",function(){e.addRow()}),this.div_container.appendChild(i),this.popup=document.createElement("div"),this.popup.classList.add("EL-popup");var n=document.createElement("div");n.classList.add("layer"),n.addEventListener("click",function(){e.popup.classList.remove("visible")});var o=document.createElement("div");o.classList.add("content");var r=document.createElement("div");r.classList.add("wraper");var s=document.createElement("div");s.classList.add("selectArea"),this.popupSelectArea=s,this.popup.appendChild(n),this.popup.appendChild(r),r.appendChild(o),o.appendChild(this.popupSelectArea),document.body.appendChild(this.popup)}return t.prototype.openPopup=function(t){var e=this,i=this;if(this.currentColumn=t,this.currentColumn.getEntity()){var n=this.currentColumn.getEntity();this.availableEntities.push(n)}this.popupSelectArea.innerHTML="";var o=document.createElement("div");o.className="options-entity",o.textContent="Delete entity...",o.classList.add("delete"),o.addEventListener("click",function(){i.currentColumn.deleteEntity(),i.popup.classList.remove("visible")}),this.popupSelectArea.appendChild(o),this.availableEntities.forEach(function(t){var n=document.createElement("div");n.className="options-entity",n.textContent=t.id,n.addEventListener("click",function(){null!==i.currentColumn&&(i.currentColumn.setEntity(t),i.availableEntities.splice(i.availableEntities.indexOf(t),1),i.copyAvailableEntities.push(t)),i.popup.classList.remove("visible")}),e.popupSelectArea.appendChild(n)}),this.popup.classList.add("visible")},t.prototype.addEntities=function(t){this.rows.forEach(function(e){e.getColumn().forEach(function(e){e.getEntity()&&(t.some(function(t){return e.getEntity().id===t.id})||e.deleteEntity())})}),this.availableEntities=t},t.prototype.addRow=function(){var t=new n.LayoutRow(this);return this.rows.push(t),this.div_container.appendChild(t.div),t},t.prototype.render=function(){var t=document.createElement("div");return t.style.width="21cm",t.style.padding="1cm",t.style.backgroundColor="#bebebe",this.rows.forEach(function(e){t.appendChild(e.render())}),'<html><head><style type="text/css"></style></head><body>'+t.outerHTML+"</body></html>"},t.prototype.serializer=function(){return{rows:this.rows.map(function(t){return t.serializer()})}},t.prototype.reset=function(){var t=this;this.rows.forEach(function(e){t.div_container.removeChild(e.div),e.clear()}),this.rows=[]},t.prototype.clear=function(){this.reset(),this.availableEntities=[],this.copyAvailableEntities=[],this.addRow()},t.prototype.parser=function(t){var e=this;this.reset(),this.rows=t.rows.map(function(t){var i=new n.LayoutRow(e);return i.clear(),i.parser(t),e.div_container.appendChild(i.div),i})},t.prototype.getEntities=function(){return this.availableEntities},t.prototype.getNumberColumns=function(){return this.numberColumns},t.prototype.assignEntity=function(t,e){if(t){var i=this.availableEntities.filter(function(e){return e.id===t})[0];e.setEntity(i),this.availableEntities.splice(this.availableEntities.indexOf(i),1),this.copyAvailableEntities.push(i)}},t.prototype.getUI=function(){return this.div},t.prototype.get_entity=function(){return this.copyAvailableEntities},t}();i.EntityLayout=o},{"./layoutrow":3}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=this;this.row=e,this.div=document.createElement("div"),this.div_content=document.createElement("div"),this.div_content.className="content-column",this.div.appendChild(this.div_content);var n=document.createElement("input");n.className="dim-col",n.type="number",n.max="5",n.min="1",n.value="1",n.addEventListener("change",function(){var t=parseInt(n.value,10),e=(10+t).toString();i.dim=t,i.div.style.flex=e+" "+e+" auto"}),this.div.appendChild(n),this.div.className="column",this.el=t,this.div.addEventListener("click",function(t){t.target===i.div&&i.el.openPopup(i)});var o=document.createElement("div");o.className="button-remove-column",o.addEventListener("click",function(){if(i.div.parentElement.getElementsByClassName("column").length>1){if(i.getEntity()){var e=i.getEntity();t.getEntities().push(e)}i.div.remove(),o.remove(),i.row.columns.splice(i.row.columns.indexOf(i),1)}}),this.div.appendChild(o)}return t.prototype.destroy=function(){this.div=null},t.prototype.getEntity=function(){return this.ent},t.prototype.deleteEntity=function(){this.ent=null,this.div_content.textContent=""},t.prototype.setEntity=function(t){var e=this;t&&(this.ent=t,e.div_content.textContent=t.id.toString())},t.prototype.render=function(){var t=document.createElement("div"),e=document.createElement("div");return e.classList.add("sledge-hammer-inner"),t.className="flexChild sledge-hammer",t.appendChild(e),this.ent&&e.appendChild(this.ent.render()),t.style.flex=this.dim+" "+this.dim+" 0px",t},t.prototype.serializer=function(){var t={entID:null,dim:this.dim};return this.ent&&(t.entID=this.ent.id),t},t.prototype.clear=function(){this.ent=null},t.prototype.setDim=function(t){this.dim=t,this.div.style.flex=t+" "+t+"auto"},t.prototype.parser=function(t){this.setDim(t.dim),this.el.assignEntity(t.entID,this)},t}();i.LayoutColumn=n},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./layoutcolumn"),o=function(){function t(t){var e=this;this.div=document.createElement("div"),this.div.className="row";var i=document.createElement("div");i.className="button-add-column",i.addEventListener("click",function(){for(var i=e.div.children,n=0,o=0;o<i.length;o++)"column"===i[o].className&&(n+=1);n<t.getNumberColumns()&&e.addColumn()}),this.div.appendChild(i);var n=document.createElement("div");n.className="button-remove-row",n.addEventListener("click",function(){e.getColumn().forEach(function(e){e.getEntity()&&t.getEntities().push(e.getEntity())}),e.div.remove(),e.el.rows.splice(e.el.rows.indexOf(e),1),n.remove()}),this.div.appendChild(n),this.columns=new Array,this.el=t,this.addColumn()}return t.prototype.getColumn=function(){return this.columns},t.prototype.addColumn=function(){var t=new n.LayoutColumn(this.el,this);return this.columns.push(t),this.div.appendChild(t.div),t},t.prototype.destroy=function(){var t=this;this.columns.forEach(function(e){t.div.removeChild(e.div),e.destroy()}),this.columns=[]},t.prototype.render=function(){var t=document.createElement("div");return t.className="flexRoot rowParent flexChild",this.columns.forEach(function(e){t.appendChild(e.render())}),t},t.prototype.clear=function(){var t=this;this.columns.forEach(function(e){t.div.removeChild(e.div),e.clear()}),this.columns=[]},t.prototype.serializer=function(){return{columns:this.columns.map(function(t){return t.serializer()})}},t.prototype.parser=function(t){var e=this;this.columns=t.columns.map(function(t){var i=new n.LayoutColumn(e.el,e);return i.parser(t),e.div.appendChild(i.div),i})},t}();i.LayoutRow=o},{"./layoutcolumn":2}]},{},[1])(1)});
//# sourceMappingURL=entitylayout.min.js.map
