!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).entitylayout=t()}}(function(){return function t(e,n,i){function o(s,d){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!d&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n||t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./layoutRow"),o=function(){function t(t){var e=this;this.availableEntities=[],this.rows=[],this.currentColumn=null,this.numberColumns=t,this.div=document.createElement("div"),this.div.className="entity-layout",this.div_container=document.createElement("div"),this.div_container.className="content-rows",this.div.appendChild(this.div_container);var n=document.createElement("div");n.className="button-add-row",n.addEventListener("click",function(){e.addRow()}),this.div_container.appendChild(n),this.popup=document.createElement("div"),this.popup.classList.add("EL-popup");var i=document.createElement("div");i.classList.add("layer"),i.addEventListener("click",function(){e.popup.classList.remove("visible")});var o=document.createElement("div");o.classList.add("content");var r=document.createElement("div");r.classList.add("wraper");var s=document.createElement("div");s.classList.add("selectArea"),this.popupSelectArea=s,this.popup.appendChild(i),this.popup.appendChild(r),r.appendChild(o),o.appendChild(this.popupSelectArea),document.body.appendChild(this.popup)}return t.prototype.openPopup=function(t){var e=this,n=this;if(this.currentColumn=t,this.currentColumn.getEntity()){var i=this.currentColumn.getEntity();this.availableEntities.push(i)}this.popupSelectArea.innerHTML="";var o=document.createElement("div");o.className="options-entity",o.textContent="Delete entity...",o.classList.add("delete"),o.addEventListener("click",function(){n.currentColumn.deleteEntity(),n.popup.classList.remove("visible")}),this.popupSelectArea.appendChild(o),this.availableEntities.forEach(function(t){var i=document.createElement("div");i.className="options-entity",i.textContent=t.id,i.addEventListener("click",function(){null!==n.currentColumn&&(n.currentColumn.setEntity(t),n.availableEntities.splice(n.availableEntities.indexOf(t),1)),n.popup.classList.remove("visible")}),e.popupSelectArea.appendChild(i)}),this.popup.classList.add("visible")},t.prototype.addEntities=function(t){this.rows.forEach(function(e){e.getColumn().forEach(function(e){e.getEntity()&&(t.some(function(t){return e.getEntity().id===t.id})||e.deleteEntity())})}),this.availableEntities=t},t.prototype.addRow=function(){var t=new i.LayoutRow(this);return this.rows.push(t),this.div_container.appendChild(t.div),t},t.prototype.clear=function(){this.availableEntities=[],this.rows=[]},t.prototype.render=function(){var t=document.createElement("div");return t.style.width="21cm",t.style.padding="1cm",t.style.backgroundColor="#bebebe",this.rows.forEach(function(e){t.appendChild(e.render())}),'<html><head><style type="text/css"></style></head><body>'+t.outerHTML+"</body></html>"},t.prototype.serializer=function(){var t=[];return this.rows.forEach(function(e){return t.push(e.serializer())}),{rows:t}},t.prototype.parser=function(t){this.rows=t.rows},t.prototype.getEntities=function(){return this.availableEntities},t.prototype.getNumberColumns=function(){return this.numberColumns},t}();n.EntityLayout=o},{"./layoutRow":3}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){var e=this;this.div=document.createElement("div"),this.div_content=document.createElement("div");var n=document.createElement("input");n.className="dim-col",n.type="number",n.max="5",n.min="1",n.value="1",n.addEventListener("change",function(){var t=parseInt(n.value,10),i=(10+t).toString();e.dim=t,e.div.style.flex=i+" "+i+" auto"}),this.div.appendChild(n),this.div.className="column",this.el=t,this.div.addEventListener("click",function(t){t.target===e.div&&e.el.openPopup(e)});var i=document.createElement("div");i.className="button-remove-column",i.addEventListener("click",function(){if(e.div.parentElement.getElementsByClassName("column").length>1){if(e.getEntity()){var n=e.getEntity();t.getEntities().push(n)}e.div.remove(),i.remove()}}),this.div.appendChild(i)}return t.prototype.destroy=function(){this.div=null},t.prototype.getEntity=function(){return this.ent},t.prototype.deleteEntity=function(){this.ent=null,this.div_content.textContent=""},t.prototype.setEntity=function(t){this.ent=t,this.div_content.className="content-column",this.div_content.textContent=t.id.toString(),this.div.appendChild(this.div_content)},t.prototype.render=function(){var t=document.createElement("div"),e=document.createElement("div");return e.classList.add("sledge-hammer-inner"),t.className="flexChild sledge-hammer",t.appendChild(e),e.appendChild(this.ent.render()),t.style.flex=this.dim+" "+this.dim+" 0px",t},t.prototype.serializer=function(){return this.ent?{id:this.ent.id,dim:this.dim}:{id:void 0,dim:1}},t.prototype.setDim=function(t){this.dim=t,this.div.style.flex=t+" "+t+"auto"},t.prototype.parser=function(t){this.setDim(t.dim),this.setEntity(t.ent)},t}();n.LayoutColumn=i},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./layoutColumn"),o=function(){function t(t){var e=this;this.div=document.createElement("div"),this.div.className="row";var n=document.createElement("div");n.className="button-add-column",n.addEventListener("click",function(){for(var n=e.div.children,i=0,o=0;o<n.length;o++)"column"===n[o].className&&(i+=1);i<t.getNumberColumns()&&e.addColumn()}),this.div.appendChild(n);var i=document.createElement("div");i.className="button-remove-row",i.addEventListener("click",function(){e.getColumn().forEach(function(e){e.getEntity()&&t.getEntities().push(e.getEntity())}),e.div.remove(),i.remove()}),this.div.appendChild(i),this.columns=new Array,this.el=t,this.addColumn()}return t.prototype.getColumn=function(){return this.columns},t.prototype.addColumn=function(){var t=new i.LayoutColumn(this.el);return this.columns.push(t),this.div.appendChild(t.div),t},t.prototype.destroy=function(){var t=this;this.columns.forEach(function(e){t.div.removeChild(e.div),e.destroy()}),this.columns=[]},t.prototype.render=function(){var t=document.createElement("div");return t.className="flexRoot rowParent flexChild",this.columns.forEach(function(e){t.appendChild(e.render())}),t},t.prototype.serializer=function(){var t=[];return this.columns.forEach(function(e){return t.push(e.serializer())}),{columns:t}},t.prototype.parser=function(t){this.columns=t.columns},t}();n.LayoutRow=o},{"./layoutColumn":2}]},{},[1])(1)});
//# sourceMappingURL=entitylayout.min.js.map
