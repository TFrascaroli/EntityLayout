!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).entitylayout=t()}}(function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n||t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./layoutrow"),o=t("./entitylayoutinlinecss"),r=function(){function t(t){var e=this;this.availableEntities=[],this.rows=[],this.currentColumn=null,this.numberColumns=t,this.div=document.createElement("div"),this.div.className="entity-layout",this.div_container=document.createElement("div"),this.div_container.className="content-rows",this.div.appendChild(this.div_container);var n=document.createElement("div");n.className="button-add-row",n.addEventListener("click",function(){e.addRow()}),this.div_container.appendChild(n),this.popup=document.createElement("div"),this.popup.classList.add("EL-popup");var i=document.createElement("div");i.classList.add("layer"),i.addEventListener("click",function(){e.popup.classList.remove("visible")});var o=document.createElement("div");o.classList.add("content");var r=document.createElement("div");r.classList.add("wraper");var s=document.createElement("div");s.classList.add("selectArea"),this.popupSelectArea=s,this.popup.appendChild(i),this.popup.appendChild(r),r.appendChild(o),o.appendChild(this.popupSelectArea),document.body.appendChild(this.popup)}return t.prototype.getUsedEntities=function(t){var e=[];return this.rows.forEach(function(n){n.columns.forEach(function(n){var i=n.getEntity();null!==i&&n!==t&&e.push(i)})}),e},t.prototype.openPopup=function(t){var e=this,n=this;this.currentColumn=t;var i=this.getUsedEntities(this.currentColumn),o=this.availableEntities.filter(function(t){return-1===i.indexOf(t)});this.popupSelectArea.innerHTML="";var r=document.createElement("div");r.className="options-entity",r.textContent="Delete entity...",r.classList.add("delete"),r.addEventListener("click",function(){n.currentColumn.deleteEntity(),n.popup.classList.remove("visible")}),this.popupSelectArea.appendChild(r),o.forEach(function(t){var i=document.createElement("div");i.className="options-entity",i.textContent=t.id,i.addEventListener("click",function(){null!==n.currentColumn&&n.currentColumn.setEntity(t),n.popup.classList.remove("visible")}),e.popupSelectArea.appendChild(i)}),this.popup.classList.add("visible")},t.prototype.addEntities=function(t){this.rows.forEach(function(e){e.getColumn().forEach(function(e){e.getEntity()&&(t.some(function(t){return e.getEntity().id===t.id})||e.deleteEntity())})}),this.availableEntities=t},t.prototype.addRow=function(){var t=new i.LayoutRow(this);return this.rows.push(t),this.div_container.appendChild(t.div),t},t.prototype.render=function(){var t=document.createElement("div"),e=document.createElement("style");return e.type="text/css",e.innerText=o.inlineCss,t.style.width="21cm",t.style.padding="1cm",t.style.backgroundColor="#bebebe",this.rows.forEach(function(e){t.appendChild(e.render())}),e.outerHTML+t.outerHTML},t.prototype.serializer=function(){return{rows:this.rows.map(function(t){return t.serializer()})}},t.prototype.reset=function(){var t=this;this.rows.forEach(function(e){t.div_container.removeChild(e.div),e.clear()}),this.rows=[]},t.prototype.clear=function(){this.reset(),this.availableEntities=[],this.addRow()},t.prototype.parser=function(t){var e=this;this.reset(),this.rows=t.rows.map(function(t){var n=new i.LayoutRow(e);return n.clear(),n.parser(t),e.div_container.appendChild(n.div),n})},t.prototype.getEntities=function(){return this.availableEntities},t.prototype.getNumberColumns=function(){return this.numberColumns},t.prototype.assignEntity=function(t,e){if(t){var n=this.availableEntities.filter(function(e){return e.id===t})[0];e.setEntity(n)}},t.prototype.getUI=function(){return this.div},t}();n.EntityLayout=r},{"./entitylayoutinlinecss":2,"./layoutrow":4}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.inlineCss=".flexRoot{width:calc(100% + 16px);height:calc(100% + 16px);background-color:#dedede}.columnParent,.rowParent{display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-line-pack:stretch;align-content:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;max-height:100%;max-width:100%}.columnParent{-webkit-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.flexChild{-ms-flex-item-align:auto;align-self:auto;position:relative!important;bottom:auto!important;top:auto!important;overflow:hidden}.sledge-hammer-inner{position:absolute}.button_export{width:20px;height:20px}"},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=this;this.row=e,this.ent=null,this.div=document.createElement("div"),this.div_content=document.createElement("div"),this.div_content.className="content-column",this.div.appendChild(this.div_content),this.dim=1;var i=document.createElement("input");i.className="dim-col",i.type="number",i.max="5",i.min="1",i.value="1",i.addEventListener("change",function(){var t=parseInt(i.value,10),e=(10+t).toString();n.dim=t,n.div.style.flex=e+" "+e+" auto"}),this.div.appendChild(i),this.div.className="column",this.el=t,this.div.addEventListener("click",function(t){t.target===n.div&&n.el.openPopup(n)});var o=document.createElement("div");o.className="button-remove-column",o.addEventListener("click",function(){if(n.div.parentElement.getElementsByClassName("column").length>1){if(n.getEntity()){var e=n.getEntity();t.getEntities().push(e)}n.div.remove(),o.remove(),n.row.columns.splice(n.row.columns.indexOf(n),1)}}),this.div.appendChild(o)}return t.prototype.destroy=function(){this.div=null},t.prototype.getEntity=function(){return this.ent},t.prototype.deleteEntity=function(){this.ent=null,this.div_content.textContent=""},t.prototype.setEntity=function(t){var e=this;t&&(this.ent=t,e.div_content.textContent=t.id.toString())},t.prototype.render=function(){var t=document.createElement("div"),e=document.createElement("div");return e.classList.add("entity-layout-inner"),t.className="flexChild entity-layout-child",t.appendChild(e),this.ent&&e.appendChild(this.ent.render()),t.style.flex=this.dim.toString()+" "+this.dim.toString()+" auto",t},t.prototype.serializer=function(){var t={entID:null,dim:this.dim};return this.ent&&(t.entID=this.ent.id),t},t.prototype.clear=function(){this.ent=null},t.prototype.setDim=function(t){this.dim=t,this.div.style.flex=t+" "+t+"auto"},t.prototype.parser=function(t){this.setDim(t.dim),this.el.assignEntity(t.entID,this)},t}();n.LayoutColumn=i},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./layoutcolumn"),o=function(){function t(t){var e=this;this.div=document.createElement("div"),this.div.className="row";var n=document.createElement("div");n.className="button-add-column",n.addEventListener("click",function(){for(var n=e.div.children,i=0,o=0;o<n.length;o++)"column"===n[o].className&&(i+=1);i<t.getNumberColumns()&&e.addColumn()}),this.div.appendChild(n);var i=document.createElement("div");i.className="button-remove-row",i.addEventListener("click",function(){e.getColumn();e.div.remove(),e.el.rows.splice(e.el.rows.indexOf(e),1),i.remove(),0===e.el.rows.length&&e.el.addRow()}),this.div.appendChild(i),this.columns=new Array,this.el=t,this.addColumn()}return t.prototype.getColumn=function(){return this.columns},t.prototype.addColumn=function(){var t=new i.LayoutColumn(this.el,this);return this.columns.push(t),this.div.appendChild(t.div),t},t.prototype.destroy=function(){var t=this;this.columns.forEach(function(e){t.div.removeChild(e.div),e.destroy()}),this.columns=[]},t.prototype.render=function(){var t=document.createElement("div");return t.className="flexRoot rowParent flexChild",this.columns.forEach(function(e){t.appendChild(e.render())}),t},t.prototype.clear=function(){var t=this;this.columns.forEach(function(e){t.div.removeChild(e.div),e.clear()}),this.columns=[]},t.prototype.serializer=function(){return{columns:this.columns.map(function(t){return t.serializer()})}},t.prototype.parser=function(t){var e=this;this.columns=t.columns.map(function(t){var n=new i.LayoutColumn(e.el,e);return n.parser(t),e.div.appendChild(n.div),n})},t}();n.LayoutRow=o},{"./layoutcolumn":3}]},{},[1])(1)});
//# sourceMappingURL=entitylayout.min.js.map
